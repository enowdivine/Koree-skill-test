(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{351:function(e,r,o){"use strict";o.r(r);var t=o(33),n=(o(89),{name:"AddBook",data:function(){return{form:{book_name:"",number_of_pages:0,author:{}},authors:[]}},mounted:function(){this.getAuthors()},methods:{onSubmit:function(e){var r=this;return Object(t.a)(regeneratorRuntime.mark((function o(){var data,t;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),!r.form.book_name||!r.form.author){o.next=22;break}if(o.prev=2,data={author_id:r.form.author.item.id,book_name:r.form.book_name,author_name:r.form.author.item.author_name,number_of_pages:r.form.number_of_pages},null===(t=localStorage.getItem("access_token"))){o.next=12;break}return o.next=8,r.$axios.post("/add-book",data,{headers:{Authorization:"Bearer ".concat(t),Accept:"multipart/form-data","Content-Type":"application/json"}});case 8:(o.sent.status=200)?(r.$toast.success("Book added",{duration:5e3}),r.form.book_name="",r.form.author_name="",r.form.number_of_pages=0):(r.$toast.error("Not Authorized",{duration:5e3}),r.$router.push({path:"/"})),o.next=14;break;case 12:r.$toast.error("Not Authorized",{duration:5e3}),r.$router.push({path:"/"});case 14:o.next=20;break;case 16:o.prev=16,o.t0=o.catch(2),r.$toast.error("Check all fields",{duration:5e3}),console.error(o.t0);case 20:o.next=23;break;case 22:r.$toast.error("Check all fields",{duration:5e3});case 23:case"end":return o.stop()}}),o,null,[[2,16]])})))()},getAuthors:function(){var e=this;return Object(t.a)(regeneratorRuntime.mark((function r(){var o,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,null===(o=localStorage.getItem("access_token"))){r.next=9;break}return r.next=5,e.$axios.get("/authors",{headers:{Authorization:"Bearer ".concat(o)}});case 5:t=r.sent,e.authors=t.data,r.next=11;break;case 9:e.$toast.error("Not Authorized",{duration:5e3}),e.$router.push({path:"/"});case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.error(r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))()}}}),m=o(59),component=Object(m.a)(n,(function(){var e=this,r=e._self._c;return r("div",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"bg-primary ml-2 w-100"},[e._v("Add Book")]),e._v(" "),r("b-modal",{attrs:{id:"modal-1",title:"Add New Book"},on:{ok:e.onSubmit}},[r("b-form",{on:{submit:e.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Book Name:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",placeholder:"Enter book name",required:""},model:{value:e.form.book_name,callback:function(r){e.$set(e.form,"book_name",r)},expression:"form.book_name"}})],1),e._v(" "),r("b-form-group",{attrs:{id:"input-group-3",label:"Author Name:","label-for":"input-3"}},[r("b-form-select",{attrs:{label:"author_name"},model:{value:e.form.author,callback:function(r){e.$set(e.form,"author",r)},expression:"form.author"}},e._l(e.authors,(function(o){return r("option",{key:o.id,domProps:{value:{item:o}}},[e._v("\n                        "+e._s(o.author_name)+"\n                    ")])})),0)],1),e._v(" "),r("b-form-group",{attrs:{id:"input-group-4",label:"Number of pages:","label-for":"input-4"}},[r("b-form-input",{attrs:{type:"number",id:"input-4",placeholder:"Enter number of pages",required:""},model:{value:e.form.number_of_pages,callback:function(r){e.$set(e.form,"number_of_pages",r)},expression:"form.number_of_pages"}})],1)],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);