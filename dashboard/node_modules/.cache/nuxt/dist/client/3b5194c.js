(window.webpackJsonp=window.webpackJsonp||[]).push([[8,4,5],{351:function(e,t,r){"use strict";r.r(t);var o=r(33),n=(r(89),{name:"AddBook",data:function(){return{form:{book_name:"",number_of_pages:0,author:{}},authors:[]}},mounted:function(){this.getAuthors()},methods:{onSubmit:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var data,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),!t.form.book_name||!t.form.author){r.next=22;break}if(r.prev=2,data={author_id:t.form.author.item.id,book_name:t.form.book_name,author_name:t.form.author.item.author_name,number_of_pages:t.form.number_of_pages},null===(o=localStorage.getItem("access_token"))){r.next=12;break}return r.next=8,t.$axios.post("/add-book",data,{headers:{Authorization:"Bearer ".concat(o),Accept:"multipart/form-data","Content-Type":"application/json"}});case 8:(r.sent.status=200)?(t.$toast.success("Book added",{duration:5e3}),t.form.book_name="",t.form.author_name="",t.form.number_of_pages=0):(t.$toast.error("Not Authorized",{duration:5e3}),t.$router.push({path:"/"})),r.next=14;break;case 12:t.$toast.error("Not Authorized",{duration:5e3}),t.$router.push({path:"/"});case 14:r.next=20;break;case 16:r.prev=16,r.t0=r.catch(2),t.$toast.error("Check all fields",{duration:5e3}),console.error(r.t0);case 20:r.next=23;break;case 22:t.$toast.error("Check all fields",{duration:5e3});case 23:case"end":return r.stop()}}),r,null,[[2,16]])})))()},getAuthors:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===(r=localStorage.getItem("access_token"))){t.next=9;break}return t.next=5,e.$axios.get("/authors",{headers:{Authorization:"Bearer ".concat(r)}});case 5:o=t.sent,e.authors=o.data,t.next=11;break;case 9:e.$toast.error("Not Authorized",{duration:5e3}),e.$router.push({path:"/"});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}}),c=r(59),component=Object(c.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"bg-primary ml-2 w-100"},[e._v("Add Book")]),e._v(" "),t("b-modal",{attrs:{id:"modal-1",title:"Add New Book"},on:{ok:e.onSubmit}},[t("b-form",{on:{submit:e.onSubmit}},[t("b-form-group",{attrs:{id:"input-group-1",label:"Book Name:","label-for":"input-1"}},[t("b-form-input",{attrs:{id:"input-1",placeholder:"Enter book name",required:""},model:{value:e.form.book_name,callback:function(t){e.$set(e.form,"book_name",t)},expression:"form.book_name"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"input-group-3",label:"Author Name:","label-for":"input-3"}},[t("b-form-select",{attrs:{label:"author_name"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}},e._l(e.authors,(function(r){return t("option",{key:r.id,domProps:{value:{item:r}}},[e._v("\n                        "+e._s(r.author_name)+"\n                    ")])})),0)],1),e._v(" "),t("b-form-group",{attrs:{id:"input-group-4",label:"Number of pages:","label-for":"input-4"}},[t("b-form-input",{attrs:{type:"number",id:"input-4",placeholder:"Enter number of pages",required:""},model:{value:e.form.number_of_pages,callback:function(t){e.$set(e.form,"number_of_pages",t)},expression:"form.number_of_pages"}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},353:function(e,t,r){"use strict";r.r(t);r(2),r(1);var o=r(33),n=(r(89),{components:{AddBook:r(351).default},data:function(){return{perPage:6,currentPage:1,rows:1,fields:["id","book_name","author_name","number_of_pages","actions"],books:[],filter:null,output:null,form:{id:"",book_name:"",number_of_pages:0,author:{}},authors:[]}},mounted:function(){this.getAuthors(),this.getBooks()},methods:{onFiltered:function(e){this.rows=e.length,this.currentPage=1},getAuthors:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===(r=localStorage.getItem("access_token"))){t.next=9;break}return t.next=5,e.$axios.get("/authors",{headers:{Authorization:"Bearer ".concat(r)}});case 5:o=t.sent,e.authors=o.data,t.next=11;break;case 9:e.$toast.error("Not Authorized",{duration:5e3}),e.$router.push({path:"/"});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getBooks:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===(r=localStorage.getItem("access_token"))){t.next=10;break}return t.next=5,e.$axios.get("/books",{headers:{Authorization:"Bearer ".concat(r)}});case 5:o=t.sent,e.books=o.data,e.rows=o.data.length,t.next=12;break;case 10:e.$toast.error("Not Authorized",{duration:5e3}),e.$router.push({path:"/"});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},updateModal:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.form.id=e.id,t.form.book_name=e.book_name,t.form.number_of_pages=e.number_of_pages;case 3:case"end":return r.stop()}}),r)})))()},updateBook:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((data={id:e.form.id,book_name:e.form.book_name,number_of_pages:e.form.number_of_pages,author_id:e.form.author.item.id,author_name:e.form.author.item.author_name}).id&&data.author_id&&data.book_name&&data.author_name&&data.number_of_pages)){t.next=15;break}if(null===(r=localStorage.getItem("access_token"))){t.next=11;break}return t.next=7,e.$axios.put("/update-book",data,{headers:{Authorization:"Bearer ".concat(r),Accept:"multipart/form-data","Content-Type":"application/json"}});case 7:(t.sent.status=200)?(e.$toast.success("Book updated",{duration:5e3}),e.form.id="",e.form.book_name="",e.form.number_of_pages="",e.form.author={}):(e.$toast.error("Not Authorized",{duration:5e3}),e.$router.push({path:"/"})),t.next=13;break;case 11:e.$toast.error("Not Authorized",{duration:5e3}),e.$router.push({path:"/"});case 13:t.next=16;break;case 15:e.$toast.error("Check all fields",{duration:5e3});case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),e.$toast.error("An error occured",{duration:5e3}),console.error(t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()},deteleBook:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var data,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!0!==confirm("Are you sure to delete book?")){r.next=25;break}if(data={id:e.id},r.prev=2,null===(o=localStorage.getItem("access_token"))){r.next=17;break}return r.next=7,t.$axios.delete("/delete-book",{headers:{Authorization:"Bearer ".concat(o),Accept:"multipart/form-data","Content-Type":"application/json"},data:data});case 7:if(!(r.sent.status=200)){r.next=13;break}return t.$toast.success("Book deleted",{duration:5e3}),r.abrupt("return",!0);case 13:t.$toast.error("Not Authorized",{duration:5e3}),t.$router.push({path:"/"});case 15:r.next=19;break;case 17:t.$toast.error("Not Authorized",{duration:5e3}),t.$router.push({path:"/"});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(2),t.$toast.error("An error occured",{duration:5e3}),console.error(r.t0);case 25:case"end":return r.stop()}}),r,null,[[2,21]])})))()}}}),c=r(59),component=Object(c.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container border rounded mt-4 p-4 overflow-auto"},[e._m(0),e._v(" "),t("div",{staticClass:"d-flex justify-content-center mb-3"},[t("b-form-input",{attrs:{type:"search",placeholder:"Type to filter data"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),t("div",{staticClass:"w-25"},[t("AddBook")],1)],1),e._v(" "),t("b-table",{staticClass:"mt-4",attrs:{id:"my-table",striped:"",filter:e.filter,fields:e.fields,items:e.books,"per-page":e.perPage,"current-page":e.currentPage,medium:""},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(actions)",fn:function(r){var o=r.item;return[t("span",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-2",modifiers:{"modal-2":!0}}],staticClass:"bg-success",on:{click:function(t){return e.updateModal(o)}}},[e._v("Edit")])],1),e._v(" "),t("span",[t("b-btn",{staticClass:"bg-danger",on:{click:function(t){return e.deteleBook(o)}}},[e._v("Delete")])],1)]}}])}),e._v(" "),t("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),e._v(" "),t("div",[t("b-modal",{attrs:{id:"modal-2",title:"Edit Book"},on:{ok:e.updateBook}},[t("b-form",{on:{submit:e.updateBook}},[t("b-form-group",{attrs:{id:"input-group-1",label:"Book Name:","label-for":"input-1"}},[t("b-form-input",{attrs:{id:"input-1",placeholder:"Enter book name",required:""},model:{value:e.form.book_name,callback:function(t){e.$set(e.form,"book_name",t)},expression:"form.book_name"}})],1),e._v(" "),t("b-form-group",{attrs:{id:"input-group-3",label:"Author Name:","label-for":"input-3"}},[t("b-form-select",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}},e._l(e.authors,(function(r){return t("option",{key:r.id,domProps:{value:{item:r}}},[e._v("\n                            "+e._s(r.author_name)+"\n                        ")])})),0)],1),e._v(" "),t("b-form-group",{attrs:{id:"input-group-3",label:"Number of pages:","label-for":"input-3"}},[t("b-form-input",{attrs:{type:"number",id:"input-3",placeholder:"Enter number of pages",required:""},model:{value:e.form.number_of_pages,callback:function(t){e.$set(e.form,"number_of_pages",t)},expression:"form.number_of_pages"}})],1)],1)],1)],1)],1)}),[function(){var e=this._self._c;return e("div",[e("h4",[this._v("Books Table")])])}],!1,null,null,null);t.default=component.exports},356:function(e,t,r){"use strict";r.r(t);var o={layout:"navbar",component:{Books:r(353).default}},n=r(59),component=Object(n.a)(o,(function(){return(0,this._self._c)("Books")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Books:r(353).default})}}]);